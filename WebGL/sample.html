<!DOCTYPE html>
<html lang="ja">
  <head>
    <meta charset="UTF-8">
    <title>Sample</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/99/three.min.js"></script>
  </head>
  <body>
    
    <script>
      var init = function() {
        
        var width = 800, height = 600;
        
        var renderer = new  THREE.WebGLRenderer({antialias:true});
        renderer.setSize(width, height);
        document.body.appendChild(renderer.domElement);
        renderer.shadowMap.enabled = true;
        renderer.setPixelRatio(window.devicePixelRatio);
        
        var scene = new THREE.Scene();
        
        var camera = new THREE.PerspectiveCamera(45, width/height, 1, 1000);
        camera.position.z = 2.5;
        camera.position.y = 0.5;
        
        /* Axis -> x:RED / y:GREEN / z:BLUE */
        var axes = new THREE.AxesHelper(20);
        scene.add(axes);
        
        /* "boxes" as "box group" */
        const boxes = new THREE.Group();
        const limit = 10;
        const oneSide = 0.1;
        var geometry = new THREE.BoxGeometry(oneSide, oneSide, oneSide);
        var material = new THREE.MeshStandardMaterial({ color:0x0000ff, wireframe:false});  
        for ( let i=0; i<limit; i++ ) {
          var box = new THREE.Mesh(geometry, material);
          var num = (Math.random()-0.5)/10;
          
          box.position.x = num;
          box.position.y = (oneSide/2) + (oneSide*i);
          box.position.z = -0.7;
          box.rotation.y = (20+num)*(Math.PI/180);
          
          boxes.add(box);
        }
        boxes.castShadow = true;
        boxes.reciveShadow = true;
        scene.add(boxes);
        
        var geometry = new THREE.PlaneGeometry(2, 2, 100, 100);
        var material = new THREE.MeshStandardMaterial({ color:0xcccccc, wireframe:false, roughness:0.0 });
        var ground = new THREE.Mesh(geometry, material);
        
        ground.rotation.x = -90*(Math.PI/180);
        
        ground.receiveShadow = true;
        scene.add(ground);
        
        
        var geometry = new THREE.TorusKnotGeometry(0.1, 1, 99, 8, 20, 8);
        var marterial = new THREE.MeshPhongMaterial({ color:0xffffff, wireframe:true });
        var torusKnot = new THREE.Mesh(geometry, material);
        
        torusKnot.position.set(0, 0.5, 1);
        // scene.add(torusKnot);
        
        var geometry = new THREE.SphereGeometry(0.02, 30, 30);
        var material = new THREE.MeshPhongMaterial({ color:0xaaaaff, opacity:0., transparent:true });
        var sphere = new THREE.Mesh(geometry, material);
        
        sphere.position.set(0, 0.01, 0);
        scene.add(sphere);
        
        
        var directionalLight = new THREE.DirectionalLight(0xdddddd, 1);
        directionalLight.position.set(0, 0, 2);
        
        var pointLight = new THREE.PointLight(0xffcccc, 3, 0, 1);
        pointLight.position.set(0, 0.01, 0);
        
        directionalLight.castShadow = true;
        scene.add(directionalLight);
        
        pointLight.castShadow = true;
        scene.add(pointLight);
        
        const lightHelper = new THREE.PointLightHelper(pointLight);
        // scene.add(lightHelper);
        
        var radius = 0.0;
        var update = function() {
          requestAnimationFrame(update);
          
          if ( pointLight.position.y < 1 ){
            pointLight.position.y += 0.001;
            sphere.position.y += 0.001
          } else {
            if ( radius < 1.0 ) radius += 0.001;
            const time = Date.now() / 500;
            pointLight.position.x = radius * Math.cos(time);
            pointLight.position.z = radius * Math.sin(time);
          }
          
          renderer.render(scene, camera);
        };
        update();
        
      }
      
      window.addEventListener( 'DOMContentLoaded', init );
    
    </script>
    
    <!-- ↓書かなくていい↓ -->
    <!-- <canvas width="800" height="600" style="width: 800px; height: 600px;"></canvas> -->

  </body>
  
</html>
