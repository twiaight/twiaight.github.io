<!DOCTYPE html>
<html lang="ja">
  <head>
    <meta charset="UTF-8" name="viewport" content="width=device-width, initial-scale=1">
    <title>Sample</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/99/three.min.js"></script>
  </head>
  <body>
    
    <script>
      var init = function() {
        
        var width = 800, height = 600;
        
        var renderer = new  THREE.WebGLRenderer();
        renderer.setSize(width, height);
        document.body.appendChild(renderer.domElement);
        renderer.shadowMap.enabled = true;
        
        var scene = new THREE.Scene();
        
        var camera = new THREE.PerspectiveCamera(45, width/height, 1, 1000);
        camera.position.z = 2;
        
        /*
        var num = Math.random();
        
        //var geometry = new THREE.BoxGeometry(num, num, num);
        var geometry = new THREE.BoxGeometry(0.1, 0.1, 0.1);
        var material = new THREE.MeshPhongMaterial({ color:0x0000ff, wireframe:false });
        var box = new THREE.Mesh(geometry, material);
        
        box.position.z = 0;
        box.position.y = 0.1;
        box.rotation.x = 20*(Math.PI/180);
        box.rotation.y = 20*(Math.PI/180);
        scene.add(box); 
        */
        
        const boxes = new THREE.Group();
        const limit = 10;
        for ( let i=0; i<limit; i++ ) {
          var geometry = new THREE.BoxGeometry(0.1, 0.1, 0.1);
          var material = new THREE.MeshPhongMaterial({ color:0x0000ff, wireframe:false });  
          var box = new THREE.Mesh(geometry, material);
          var num = Math.random()/10;
          
          box.position.x = num;
          box.position.y = 0.1 + 0.1*i;
          box.position.z = 2;
          box.rotation.x = 20*(Math.PI/180);
          box.rotation.y = 20*(Math.PI/180);
          
          boxes.add(box);
        }
        
        scene.add(boxes);
        
        var geometry = new THREE.PlaneGeometry(2, 2, 100, 100);
        var material = new THREE.MeshPhongMaterial({ color:0xcccccc, wireframe:false });
        var ground = new THREE.Mesh(geometry, material);
        
        // ground.position.z = 0;
        // ground.position.y = -1;
        ground.rotation.x = -70*(Math.PI/180);
        // ground.rotation.y = Math.PI/4;
        // ground.rotation.z = Math.PI/4;
        scene.add(ground);
        
        
        
        // var directionalLight1 = new THREE.DirectionalLight(0xffffff);
        var directionalLight1 = new THREE.PointLight(0xffffff, 1, 0, 1);
        directionalLight1.position.set(0, 1, 4);
        
        scene.add(directionalLight1);
        
        
        directionalLight1.castShadow = true;
        box.castShadow = true;
        ground.receiveShadow = true;
        
        
        var update = function() {
          requestAnimationFrame(update);
          // ground.rotation.x += 0.01;
          // ground.rotation.z += 0.1*(Math.PI/180);
          renderer.render(scene, camera);
        };
        update();
        
      }
      
      window.addEventListener( 'DOMContentLoaded', init );
    
    </script>
    
    <!-- ↓書かなくていい↓ -->
    <!-- <canvas width="800" height="600" style="width: 800px; height: 600px;"></canvas> -->

  </body>
  
</html>
